"use strict";angular.module("quickFormApp",["ngRoute","ui.bootstrap","hljs"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"components/main.html"}).otherwise({redirectTo:"/"})}]).config(["$provide","$routeProvider",function(a,b){b.when("/formbuilder",{templateUrl:"components/formbuilder/formbuilder.html"})}]).config(["$provide","$routeProvider",function(a,b){b.when("/formpreview",{templateUrl:"components/formpreview/formPreview.html"}),a.decorator("ngModelDirective",["$delegate",function(a){var b=a[0],c=b.controller;return b.controller=["$scope","$element","$attrs","$injector",function(a,b,d,e){var f=e.get("$interpolate");d.$set("name",f(d.name||"")(a)),a.field&&(this.mgl_displayName=a.field.display_name||""),this.mgl_displayErrorIcon=function(){return this.$dirty&&this.$invalid},this.mgl_displaySuccessIcon=function(){return this.$valid&&this.$dirty&&""!==this.$modelValue},this.mgl_errorArray=function(){},e.invoke(c,this,{$scope:a,$element:b,$attrs:d})}],a}])}]).config(["$provide","$routeProvider",function(a,b){b.when("/output",{templateUrl:"components/output/output.html"})}]),angular.module("quickFormApp").service("formData",function(){return this.name="New Contact",this.fields=[{display_name:"Name",display_priority:"10",display_common:!0,input_type:"text",name:"1_Text",id:1,value:"",placeholder:{value:""},required:!0,pattern:{value:"",regex:""},maxlength:{value:""}},{display_name:"Telephone Number",display_priority:"40",display_common:!1,input_type:"tel",name:"2_Telephone",id:2,value:"",placeholder:{value:""},required:!1,pattern:{value:"",regex:""},maxlength:{value:""}},{display_name:"Email Address",display_priority:"20",display_common:!0,input_type:"email",name:"3_Email",id:3,value:"",placeholder:{value:""},required:!1,pattern:{value:"",regex:""},maxlength:{value:""},multiple:{value:!0}},{display_name:"Contact Type",display_priority:"40",display_common:!1,input_type:"dropdown",name:"4_Dropdown_List",id:4,value:"",required:!0,options:[{name:"Customer",value:"option 1",$$hashKey:"02J"},{name:"Supplier",value:"option 2",$$hashKey:"02K"},{name:"Employee",value:"option 3",$$hashKey:"02L"}]}],this.idExists=function(a){var b=!1;return angular.forEach(this.fields,function(c){a===c.id&&(b=!0)}),b},this.uniqueFieldId=function(a){for(;this.idExists(a);)a+=1;return a},this.clearForm=function(){this.name="",this.fields=[]},this.addField=function(a){var b={};angular.copy(a,b),b.id=this.uniqueFieldId(this.fields.length+1),b.name=b.id+"_"+b.display_name.replace(/ /g,"_"),this.fields.push(b)},this.removeField=function(a){this.fields.splice(a,1)},this.addOption=function(a,b){this.fields[a].options.push(b)},this.deleteOption=function(a,b){this.fields[a].options.splice(b,1)},this.displayValue=function(a){var b="";return angular.forEach(this.fields,function(c){c.name===a&&(b=c.display_name)}),b},this}),angular.module("quickFormApp").factory("inputTypes",function(){return{inputTypes:[{display_name:"Checkbox",display_priority:"30",display_common:!1,input_type:"checkbox",name:"",id:"",value:"",checked:{value:!1}},{display_name:"Color",display_priority:"80",display_common:!1,input_type:"color",name:"",id:"",value:"",required:!1},{display_name:"Date",display_priority:"20",display_common:!0,input_type:"date",name:"",id:"",value:"",min:{value:""},max:{value:""},required:!1},{display_name:"Dropdown List",display_priority:"40",display_common:!1,input_type:"dropdown",name:"",id:"",value:"",required:!1,options:[{name:"option 1",value:"option 1"},{name:"option 2",value:"option 2"},{name:"option 3",value:"option 3"}]},{display_name:"Email",display_priority:"40",display_common:!0,input_type:"email",name:"",id:"",value:"",placeholder:{value:""},required:!1,pattern:{value:"",regex:""},maxlength:{value:""},multiple:{value:!0}},{display_name:"Month",display_priority:"75",display_common:!1,input_type:"month",name:"",id:"",value:"",min:{value:""},max:{value:""},required:!1},{display_name:"Number",display_priority:"30",display_common:!0,input_type:"number",name:"",id:"",value:"",min:{value:""},max:{value:""},required:!1},{display_name:"Password",display_priority:"40",display_common:!1,input_type:"password",name:"",id:"",value:"",required:!1,maxlength:{value:""}},{display_name:"Radio group",display_priority:"90",display_common:!1,input_type:"radio",name:"",id:"",value:"",required:!1,options:[{name:"option 1",value:"option 1"},{name:"option 2",value:"option 2"},{name:"option 3",value:"option 3"}]},{display_name:"Range",display_priority:"60",display_common:!1,input_type:"range",name:"",id:"",value:"",min:{value:""},max:{value:""},required:!1},{display_name:"Telephone",display_priority:"20",display_common:!1,input_type:"tel",name:"",id:"",value:"",placeholder:{value:""},required:!1,pattern:{value:"",regex:""},maxlength:{value:""}},{display_name:"Text",display_priority:"10",display_common:!0,input_type:"text",name:"",id:"",value:"",placeholder:{value:""},required:!1,pattern:{value:"",regex:""},maxlength:{value:""}},{display_name:"Text Area",display_priority:"90",display_common:!1,input_type:"textarea",name:"",id:"",value:"",required:!1},{display_name:"Time",display_priority:"76",display_common:!1,input_type:"time",name:"",id:"",value:"",min:{value:""},max:{value:""},required:!1},{display_name:"URL",display_priority:"50",display_common:!1,input_type:"url",name:"",id:"",value:"",placeholder:{value:""},required:!1,pattern:{value:"",regex:""},maxlength:{value:""}},{display_name:"Week",display_priority:"72",display_common:!1,input_type:"week",name:"",id:"",value:"",min:{value:""},max:{value:""},required:!1}]}}),angular.module("quickFormApp").controller("FormbuilderCtrl",["$scope","inputTypes","formData",function(a,b,c){a.inputTypes=b.inputTypes,a.formData=c}]),angular.module("quickFormApp").directive("quickFormField",["$http","$compile",function(a,b){var c;return c=function(c,d){("date"==c.field.input_type||"month"==c.field.input_type||"week"==c.field.input_type)&&(c.today=function(){c.dt=new Date},c.today(),c.showWeeks=!1,c.toggleWeeks=function(){c.showWeeks=!c.showWeeks},c.clear=function(){c.dt=null},c.open=function(a){a.preventDefault(),a.stopPropagation(),c.opened=!c.opened},c.dateOptions={"year-format":"'yyyy'","starting-day":1},c.formats=["dd-MMMM-yyyy","yyyy/MM/dd","shortDate"],c.format=c.formats[0]);var e="./components/formpreview/inputTemplates/"+c.field.input_type+".html";a.get(e).success(function(a){d.html(a),b(d.contents())(c)})},{restrict:"E",link:c}}]),angular.module("quickFormApp").controller("FormpreviewCtrl",["$scope","formData",function(a,b){a.formData=b}]),angular.module("quickFormApp").controller("OutputCtrl",["$scope","formData","outputFunctions",function(a,b,c){a.outputType="html",a.cssStyle="",a.jsStyle="angular",a.codeSource=function(){return c.outputFunction(b,a.outputType,a.cssStyle,a.jsStyle)}}]),angular.module("quickFormApp").factory("outputFunctions",function(){function a(a){return a.replace(/ /g,"_")}var b=String.fromCharCode(13),c="  ",d=function(d,e,f){function g(b){return"angular"==f?' data-ng-submit="submit'+a(b.name)+"("+a(b.name)+')"':""}function h(b){return"angular"==f?'data-ng-model="'+a(d.name)+"."+a(b.display_name)+'" ':""}function i(){return"bootstrap"==e?'class="control-label" ':""}function j(){return"bootstrap"==e?'class="form-control" ':""}function k(){return"bootstrap"==e?' class="form-group"':""}function l(a){return'for="'+a.id+'"'}function m(a){var b='id="'+a.id+'" name="'+a.name+'" '+(a.value&&""!==a.value?' value="'+a.value+'" ':"")+(a.placeholder&&""!==a.placeholder.value?' placeholder="'+a.placeholder.value+'" ':"")+(a.checked?"checked = "+a.checked.value+" ":"")+(a.min&&""!==a.min.value?' min="'+a.min.value+'" ':"")+(a.max&&""!==a.max.value?' max="'+a.max.value+'" ':"")+(a.maxlength&&""!==a.maxlength.value?' maxlength="'+a.maxlength.value+'" ':"")+(a.pattern&&""!==a.pattern.value?' pattern="'+a.pattern.value+'" ':"")+(a.required?"required ":"")+h(a);return b.trim()}function n(a){var d=b;return angular.forEach(a.options,function(a){d+=c+c+c+' <option value="'+a.name+'">'+a.name+"</option>"+b}),d}function o(a){return"<label "+i()+l(a)+">"+a.display_name+"</label>"}function p(a){if("dropdown"==a.input_type)return"<select "+j()+m(a)+">"+n(a)+c+c+"</select>";if("radio"==a.input_type){var d="";return angular.forEach(a.options,function(e){d+='<input type="radio" name="'+a.name+'" value="'+e.name+'">'+e.name+b+c+c}),d.trim()}return"textarea"==a.input_type?'<textarea rows="3" '+j()+m(a)+"></textarea>":"<input "+j()+'type="'+a.input_type+'" '+m(a)+">"}function q(a){var d="";return angular.forEach(a,function(a){d+=c+"<div"+k()+">"+b,d+=c+c+o(a)+b,d+=c+c+p(a)+b,d+=c+"</div>"+b,d+=b}),d}return'<form role="form" name="'+a(d.name)+'Form"'+g(d)+">"+b+b+c+"<legend>"+d.name+"</legend>"+b+b+q(d.fields)+c+'<button type="submit">Submit</button>'+b+b+"</form>"},e=function(d){function e(a){return a?", required: true":""}function f(a){return"number"==a?"Number":"checkbox"==a?"Boolean":"date"==a?"Date":"String"}{var g="'use strict';"+b+"var mongoose = require('mongoose');"+b+"Schema = mongoose.Schema;"+b+b+"/**"+b+"* "+d.name+" Schema"+b+"*/"+b,h=function(){var g="var "+a(d.name)+"Schema = new Schema({"+b;return angular.forEach(d.fields,function(d){g+=c+a(d.display_name)+": {type: "+f(d.input_type)+e(d.required)+"},"+b}),g+="});"+b+b},i="/**"+b+"*  Validations"+b+"*/"+b,j=function(){var e="";return angular.forEach(d.fields,function(f){e+=a(d.name)+'Schema.schema.path("'+a(f.display_name)+'").validate(function (value) {'+b+c+"//insert validation here"+b+'}, "Invalid message");'+b+b}),e};"mongoose.model('"+a(d.name)+"', "+a(d.name)+"Schema);"}return g+h()+i+j()},f=function(d){function e(){var b="";return d.fields.forEach(function(c){c.required&&(b+="'"+a(c.display_name)+"',")}),b.slice(0,b.length-1)}function f(a){return"checkbox"!==a&&"number"!==a?"newData.isString()":"checkbox"==a?"newData.isBoolean()":"number"==a?"newData.isNumber()":""}function g(a){return a?" && newData.val() != ''":""}function h(){var e="";return d.fields.forEach(function(d){e+=c+c+'"'+a(d.display_name)+'": {'+b+c+c+c+'".validate": "'+f(d.input_type)+g(d.required)+'"},'+b}),e.slice(0,e.length-2)+b}var i="{"+b+'"'+a(d.name)+'": {'+b+c+'"$'+a(d.name)+'": {'+b+c+c+'".read": true,'+b+c+c+'".write": true,'+b+c+c+'".validate": "newData.hasChildren(['+e()+'])",'+b,j=c+c+"}"+b+c+"}"+b+"}";return i+h()+j};return{outputOptions:[{name:"html",options:[{name:"bootstrap",value:!1},{name:"angular",value:!1}]},{name:"mongoose",options:[]},{name:"firebase",options:[]}],outputFunction:function(a,b,c,g){switch(b){case"html":return d(a,c,g);case"mongoose":return e(a);case"firebase":return f(a)}return"no output"}}});